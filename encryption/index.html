
<!doctype html>

<html>
<head>
  <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1.0, user-scalable=yes">
  <meta name="theme-color" content="#4F7DC9">
  <meta charset="UTF-8">
  <title>Encryption</title>
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Code+Pro:400|Roboto:400,300,400italic,500,700|Roboto+Mono">
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
  <link rel="stylesheet" href="https://storage.googleapis.com/codelab-elements/codelab-elements.css">
  <style>
    .success {
      color: #1e8e3e;
    }
    .error {
      color: red;
    }
  </style>
</head>
<body>
  <google-codelab-analytics gaid="UA-49880327-14"></google-codelab-analytics>
  <google-codelab codelab-gaid=""
                  id="encryption"
                  title="Encryption"
                  environment="web"
                  feedback-link="">
    
      <google-codelab-step label="Overview" duration="1">
        <h2 class="checklist" is-upgraded>What You&#39;ll Learn</h2>
<ul>
<li>How early, classical, encryption ciphers work</li>
<li>How symmetric key block ciphers work. Specifically, the ‘modes of operation&#39; of block ciphers, not the internal details of real-world block ciphers i.e. AES.</li>
<li>An example of <strong>perfect</strong> encryption</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Prerequisites" duration="0">
        <ol type="1">
<li>In Learning Central, you&#39;ll find a Java Jar file titled <code>hashing-encryption.jar</code> under <em>Topic 2 - Applied Cryptography.</em></li>
<li>Download and execute the jar: <br><code>java -jar hashing-encryption.jar<br></code></li>
<li>In a browser navigate to http://localhost:8080/enc</li>
<li>You should see a page similar to: <img alt="intro" src="img/cc0922fe6603a363.png"></li>
<li>In the text area at the top, you will see a JavaScript function that implements a very basic Caesar Cipher.</li>
<li>You can update the script and save it (the save button is below the text area), or;</li>
<li>You can change to one of the other predefined functions in the dropdown.</li>
</ol>


      </google-codelab-step>
    
      <google-codelab-step label="Step 1 - Caesar Cipher" duration="0">
        <ul>
<li>Using the ‘caesar cipher&#39; function provided, click ‘compute&#39;  <ul>
<li>What do you notice about the Hex representation of both the original <em>message</em>, and the encrypted cipher text?</li>
</ul>
</li>
<li>Take a look at the encrypted version of the Tux penguin.  <ul>
<li>Does it look different?</li>
</ul>
</li>
<li>Is the decrypted message accurate? i.e. the same as the original message</li>
<li>Did we do something amazing? ... or not? </li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Step 2 - Caesar Cipher With Shift" duration="0">
        <ul>
<li>Change the key from <code>0</code> to <code>1</code>. Click ‘compute&#39; again.  <ul>
<li>What do you notice about the Hex representation of both the original message and the encrypted cipher text?</li>
</ul>
</li>
<li>Take a look at the encrypted version of the Tux penguin.  <ul>
<li>Does it look different?</li>
</ul>
</li>
<li>Is the decrypted message accurate? i.e. the same as the original message</li>
<li>Did we do something amazing? ... or not?</li>
<li>Try different keys, see the bottom of the webpage for examples.</li>
</ul>
<p class="image-container"><img alt="caesar-penguin" src="img/35f5c1cac1596347.jpg"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Step 43 - One-Time Pad Cipher" duration="0">
        <ul>
<li>Using the ‘one-time-pad&#39; function provided, (change on the drop-down and click ‘switch&#39;) change the key to <code>10111111000010001111111101110010</code>, and click ‘compute&#39;  <ul>
<li><strong>Note</strong>, the one-time-pad requires a key that is the same length as the <em>message</em> (or image) to encrypt, hence we can not supply a key long enough to encrypt Tux!</li>
</ul>
</li>
<li>Again, what do you notice about the Hex representation of both the original <em>message</em> and the encrypted cipher text?</li>
<li>What happens if you change the <em>message</em> to something longer or shorter?</li>
<li>What happens if you change the <em>message</em> to something with the <strong>same</strong> number of characters?</li>
<li>Keeping the <em>message</em> as ‘Text&#39;, what happens if you change the number of bits (1s or 0s) in the key? e.g. add a <code>1</code> to the end of the current key.</li>
<li>Keep the key as <code>10111111000010001111111101110010</code>, use <code>HiHi</code> as the message. After clicking compute, do you notice any repetition or pattern in the Hex representation of the cipher text?</li>
<li>Is this amazing?  <ul>
<li>What are the limitations?  <ul>
<li>The key can be used only once</li>
<li>The key must be ‘destroyed&#39; after each use</li>
<li>The key must be random</li>
</ul>
</li>
</ul>
</li>
</ul>


      </google-codelab-step>
    
      <google-codelab-step label="Step 4 - XOR Based Block Cipher" duration="0">
        <ul>
<li>It is impractical to transfer keys the same size as the message to encrypt</li>
<li>It is impractical to change the key for each new message to encrypt.</li>
<li>So what about something else?</li>
<li>Using the ‘block-cipher&#39; function provided (change on the drop-down and click ‘switch&#39;), change the key to <code>10110101</code> (or any 8-bit key you want), reset the encrypted image, and click ‘compute&#39;.</li>
<li>Again, what do you notice about the Hex representation of both the original <em>message</em> and the encrypted cipher text?</li>
<li>What happens if you repeat the <em>message</em> e.g. ‘TextText&#39;  <ul>
<li>Look at the cipher text as hex.</li>
<li>What is going wrong?</li>
</ul>
</li>
<li>Did this securely encrypt Tux?  <ul>
<li>Can you still see him?</li>
</ul>
</li>
<li>Would any major companies use a similar (obviously far more sophisticated implementation!) type of encryption?</li>
</ul>
<p class="image-container"><img alt="ecb-penguin" src="img/57df208973cc7591.jpg"></p>
<p>This block cipher works in a similar mode to Electronic CodeBook (ECB) mode encryption (which is flawed):</p>
<p class="image-container"><img alt="ecb-encryption" src="img/1d627f41d238fd1b.png"></p>
<p><strong>Note</strong>, this is similar to a Vigenère cipher.</p>


      </google-codelab-step>
    
      <google-codelab-step label="Step 5 - XOR Cipher Block with Chaining" duration="0">
        <p><strong>Note</strong>, this is experimental.</p>
<ul>
<li>Using the ‘block-cipher-chaining&#39; function provided (change on the drop-down and click ‘switch&#39;), change the key to <code>10110101</code> (or any 8-bit key you want), reset the encrypted image, and click ‘compute&#39;.</li>
<li>Did this securely encrypt Tux?  <ul>
<li>No, but is it an improvement of the first block-cipher we used?</li>
<li>In real-world encryption algorithms e.g. AES, much more happens to the plaintext during each ‘block&#39; that is encrypted.</li>
</ul>
</li>
<li>Can you see the IV variable in the code?  <ul>
<li>This is an initialization vector (salt), and without it, the first ‘block&#39; (character of the text, color in the image) would always encrypt to the same cipher text using the same key.</li>
<li>This should change for each encryption operation - it is fixed here, so this is flawed.</li>
</ul>
</li>
</ul>
<p class="image-container"><img alt="ecb-penguin" src="img/e5a7f48118b47d74.jpg"></p>
<p>This block cipher works in a similar mode to the Cipher Block Chaining (CBC) mode of encryption:</p>
<p class="image-container"><img alt="ecb-encryption" src="img/2de302be0a78dd89.png"></p>


      </google-codelab-step>
    
      <google-codelab-step label="Real-World Symmetric Key Block Ciphers?" duration="0">
        <p>Other than the trivial Caesar Cipher and the impractical One-Time Pad, all the XOR-based encryption (mode) functions used in these labs are <strong>not</strong> full encryption schemes. That is, amongst other things, XOR schemes on their own are linear and malleable. Malleability allows an attacker to manipulate intercepted cipher text — without decrypting it — and change part of it to something different but still meaningful — passing the modified cipher text onto the recipient. Linearity makes it easier to break the cipher (e.g. by solving linear equations) if you know the plaintext-cipher text pairs, known as a Chosen Plaintext Attack (CPA).</p>
<p>This is why real-world encryption ciphers like AES use additional techniques such as permutation, substitution, rounds, authentication tags, and key schedules. It is a huge topic!</p>
<p>The ciphers presented here are all symmetric key ciphers, we have not discussed asymmetric key encryption e.g. public key cryptography.</p>
<p>Also, all these run in JavaScript, I&#39;ve no real idea what it is actually doing when XORing!</p>


      </google-codelab-step>
    
      <google-codelab-step label="Takeaways" duration="0">
        <ol type="1">
<li>Do not ‘roll your own&#39; cryptographic algorithms, use existing, established, tested implementations.  <ul>
<li>Java allows unrestricted use of its cryptographic libraries (they used to be restricted by the US goverment)</li>
</ul>
</li>
<li>The secret key used needs to be kept secret - with it the process can be reversed and the cipher text decrypted (sounds obvious, but key management is hard and critical).</li>
<li>For block ciphers, use the correct ‘mode of operation&#39; e.g. AES-CBC (Cipher Block Chaining) or better AES-CTR/GCM (Counter modes) over AES-ECB (Electronic CodeBook).</li>
<li>The initialisation vector needs to be, securely random, and different for each encryption operation, to prevent the first block from producing predictable results.</li>
<li>Have cryptographic agility, existing algorithms will be broken, and new algorithms or modes will be created - see post-quantum cryptography. You will need to adapt.</li>
</ol>


      </google-codelab-step>
    
  </google-codelab>

  <script src="https://storage.googleapis.com/codelab-elements/native-shim.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/custom-elements.min.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/prettify.js"></script>
  <script src="https://storage.googleapis.com/codelab-elements/codelab-elements.js"></script>
  <script src="//support.google.com/inapp/api.js"></script>

</body>
</html>
